<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>AMap Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        html,
        body,
        #container {
            height: 100%;
            margin: 0;
        }
    </style>
    <script src="https://webapi.amap.com/maps?v=2.0&key=b886c3f67152803e081f0b0f5594a55e"></script>
</head>

<body>
    <div id="container"></div>
    <script>

        function sendMsg() {
            // 向 RN 发送消息
            window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'reply', text: '你好 RN!' }));
        }
        sendMsg()

        // 接收 RN 传过来的坐标
        window.document.addEventListener('message', function (e) {
            const data = JSON.parse(e.data);
            const { latitude, longitude } = data;

            var map = new AMap.Map("container", {
                zoom: 16,
                center: [longitude, latitude],
            });

            console.log('收到 RN 坐标', latitude, longitude);
            const icon = new AMap.Icon({
                image: "./poi-marke.png",
                imageSize: new AMap.Size(25, 34),
            });
            if (map) {
                map.setCenter([longitude, latitude]); // 高德经度在前
                new AMap.Marker({
                    icon: icon,
                    position: [longitude, latitude],
                    map
                });
            }

        });
    </script>
</body>

</html>